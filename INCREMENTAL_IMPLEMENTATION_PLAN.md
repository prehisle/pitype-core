# ğŸ“‹ è´¨é‡é—¨ç¦å¢é‡å®æ–½è®¡åˆ’

## ğŸ¯ å®æ–½åŸåˆ™

1. **æ¯æ¬¡åªæ”¹ä¸€ä¸ªæ–¹é¢** - é™ä½é£é™©
2. **å…ˆæœ¬åœ°åCI** - å¿«é€Ÿåé¦ˆ
3. **å…ˆåŸºç¡€åé«˜çº§** - ç¨³æ‰ç¨³æ‰“
4. **æ¯æ­¥éƒ½æµ‹è¯•** - ç¡®ä¿å¯ç”¨
5. **å¯éšæ—¶å›æ»š** - ä¿æŒå®‰å…¨

---

## ğŸ“… å®æ–½è·¯çº¿å›¾ï¼ˆå…±7æ­¥ï¼‰

### âœ… ç¬¬0æ­¥ï¼šå‡†å¤‡å·¥ä½œï¼ˆå½“å‰ï¼‰

- [x] åˆ›å»ºæ‰€æœ‰é…ç½®æ–‡ä»¶
- [x] æ›´æ–° package.json
- [ ] å¼€å§‹å¢é‡å®æ–½

---

### ğŸ”µ ç¬¬1æ­¥ï¼šåŸºç¡€ä»£ç è§„èŒƒï¼ˆæœ€ä½é£é™©ï¼‰â­ ä»è¿™é‡Œå¼€å§‹

**ç›®æ ‡**: ç»Ÿä¸€ä»£ç é£æ ¼ï¼Œä¸å½±å“ç°æœ‰æµç¨‹

**å®æ–½å†…å®¹**:

1. EditorConfig é…ç½®
2. Prettier æ ¼å¼åŒ–ç°æœ‰ä»£ç 
3. ESLint ä¿®å¤

**æµ‹è¯•éªŒè¯**:

```bash
# 1. æ ¼å¼åŒ–æ‰€æœ‰ä»£ç 
npm run format

# 2. æ£€æŸ¥æ˜¯å¦æœ‰æ ¼å¼é—®é¢˜
npm run format:check

# 3. æ£€æŸ¥ lint æ˜¯å¦é€šè¿‡
npm run lint

# 4. è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿æ²¡æœ‰ç ´ååŠŸèƒ½
npm test
```

**å›æ»šæ–¹æ¡ˆ**: `git reset --hard HEAD`

**é¢„è®¡æ—¶é—´**: 10åˆ†é’Ÿ

**é£é™©**: ğŸŸ¢ ä½ - ä»…æ ¼å¼åŒ–ï¼Œä¸æ”¹é€»è¾‘

---

### ğŸ”µ ç¬¬2æ­¥ï¼šGit Hooksï¼ˆæœ¬åœ°è´¨é‡å¡ç‚¹ï¼‰

**ç›®æ ‡**: åœ¨æäº¤æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼Œæå‰å‘ç°é—®é¢˜

**å®æ–½å†…å®¹**:

1. å®‰è£… husky + lint-staged
2. é…ç½® pre-commit hook
3. é…ç½® commit-msg hook

**æµ‹è¯•éªŒè¯**:

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. åˆå§‹åŒ– husky
npm run prepare

# 3. æ£€æŸ¥ hooks æ–‡ä»¶
ls -la .husky/

# 4. æµ‹è¯• pre-commitï¼ˆåº”è¯¥è‡ªåŠ¨æ ¼å¼åŒ–ï¼‰
echo "const  x=1" >> test-file.js
git add test-file.js
git commit -m "test: verify pre-commit"
# è§‚å¯Ÿæ˜¯å¦è‡ªåŠ¨æ ¼å¼åŒ–

# 5. æµ‹è¯• commit-msgï¼ˆåº”è¯¥è¢«æ‹’ç»ï¼‰
git commit --allow-empty -m "bad commit message"
# åº”è¯¥å¤±è´¥

# 6. æµ‹è¯•æ­£ç¡®çš„æäº¤æ¶ˆæ¯ï¼ˆåº”è¯¥æˆåŠŸï¼‰
git commit --allow-empty -m "test: valid commit message"
# åº”è¯¥æˆåŠŸ

# 7. æ¸…ç†æµ‹è¯•æ–‡ä»¶
git reset HEAD~1
rm -f test-file.js
```

**å›æ»šæ–¹æ¡ˆ**:

```bash
rm -rf .husky
npm uninstall husky lint-staged @commitlint/cli @commitlint/config-conventional
```

**é¢„è®¡æ—¶é—´**: 15åˆ†é’Ÿ

**é£é™©**: ğŸŸ¡ ä¸­ä½ - ä»…å½±å“æœ¬åœ°æäº¤æµç¨‹ï¼Œå¯ç”¨ `--no-verify` è·³è¿‡

---

### ğŸ”µ ç¬¬3æ­¥ï¼šå¢å¼ºç°æœ‰CIï¼ˆæ”¹è¿›ä¸ç ´åï¼‰

**ç›®æ ‡**: åœ¨ç°æœ‰CIåŸºç¡€ä¸Šå¢å¼ºï¼Œä¸å¼•å…¥æ–°çš„é—¨ç¦

**å®æ–½å†…å®¹**:

1. ä¿ç•™ç°æœ‰ `.github/workflows/ci.yml`
2. æ·»åŠ è¦†ç›–ç‡æŠ¥å‘Šï¼ˆä¸å¼ºåˆ¶é˜ˆå€¼ï¼‰
3. æ·»åŠ ç±»å‹æ£€æŸ¥

**ä¿®æ”¹æ–¹æ¡ˆ**: å¢å¼ºç°æœ‰ ci.yml è€Œä¸æ˜¯æ›¿æ¢

```yaml
# åœ¨ç°æœ‰ Test æ­¥éª¤åæ·»åŠ 
- name: Generate coverage report
  run: npm run test:coverage
  continue-on-error: true # ä¸é˜»å¡

- name: Type check
  run: npm run type-check
  continue-on-error: true # ä¸é˜»å¡
```

**æµ‹è¯•éªŒè¯**:

```bash
# 1. æœ¬åœ°è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
npm run test:coverage

# 2. æœ¬åœ°è¿è¡Œç±»å‹æ£€æŸ¥
npm run type-check

# 3. åˆ›å»ºæµ‹è¯•åˆ†æ”¯
git checkout -b test/step3-enhanced-ci

# 4. æäº¤å¹¶æ¨é€
git add .github/workflows/ci.yml
git commit -m "ci: add coverage and type check"
git push -u origin test/step3-enhanced-ci

# 5. è§‚å¯Ÿ GitHub Actions æ˜¯å¦æˆåŠŸè¿è¡Œ
# 6. æ£€æŸ¥æ˜¯å¦ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

**å›æ»šæ–¹æ¡ˆ**:

```bash
git revert <commit-hash>
# æˆ–æ¢å¤åŸ ci.yml
```

**é¢„è®¡æ—¶é—´**: 20åˆ†é’Ÿ

**é£é™©**: ğŸŸ¢ ä½ - ä½¿ç”¨ continue-on-errorï¼Œä¸ä¼šé˜»å¡åˆå¹¶

---

### ğŸ”µ ç¬¬4æ­¥ï¼šå¯ç”¨ Codecovï¼ˆå¤–éƒ¨æœåŠ¡é›†æˆï¼‰

**ç›®æ ‡**: å¯è§†åŒ–è¦†ç›–ç‡è¶‹åŠ¿

**å®æ–½å†…å®¹**:

1. æ³¨å†Œ Codecov è´¦å·
2. é…ç½® CODECOV_TOKEN
3. ä¿®æ”¹ CI ä¸Šä¼ è¦†ç›–ç‡

**æµ‹è¯•éªŒè¯**:

```bash
# 1. è®¿é—® https://codecov.io å¹¶æˆæƒ GitHub ä»“åº“

# 2. å¤åˆ¶ token å¹¶æ·»åŠ åˆ° GitHub Secrets
# Settings â†’ Secrets â†’ Actions â†’ New repository secret
# Name: CODECOV_TOKEN
# Value: <your-token>

# 3. æ›´æ–° CI é…ç½®æ·»åŠ ä¸Šä¼ æ­¥éª¤

# 4. åˆ›å»ºæµ‹è¯•æäº¤
git checkout -b test/step4-codecov
git commit --allow-empty -m "ci: add codecov integration"
git push -u origin test/step4-codecov

# 5. æ£€æŸ¥ Codecov Dashboard æ˜¯å¦æ˜¾ç¤ºæŠ¥å‘Š
# https://codecov.io/gh/<your-org>/<repo>
```

**å›æ»šæ–¹æ¡ˆ**:

```bash
# åˆ é™¤ Codecov ä¸Šä¼ æ­¥éª¤
# æ’¤é”€ GitHub Secretï¼ˆå¦‚æœéœ€è¦ï¼‰
```

**é¢„è®¡æ—¶é—´**: 15åˆ†é’Ÿ

**é£é™©**: ğŸŸ¢ ä½ - ä»…ä¸Šä¼ æŠ¥å‘Šï¼Œä¸å½±å“CIæµç¨‹

---

### ğŸ”µ ç¬¬5æ­¥ï¼šå®Œæ•´è´¨é‡é—¨ç¦ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼Œä½†å¯é€‰ï¼‰

**ç›®æ ‡**: å¯ç”¨æ‰€æœ‰è´¨é‡æ£€æŸ¥ï¼Œä½†å…ˆä½œä¸ºå¯é€‰é¡¹

**å®æ–½å†…å®¹**:

1. éƒ¨ç½² quality-gate.ymlï¼ˆä¸ç°æœ‰ ci.yml å¹¶è¡Œï¼‰
2. ä¸è®¾ç½®ä¸ºå¿…éœ€æ£€æŸ¥
3. è§‚å¯Ÿè¿è¡Œæƒ…å†µ

**æµ‹è¯•éªŒè¯**:

```bash
# 1. æ·»åŠ  quality-gate.yml
git checkout -b test/step5-quality-gate
git add .github/workflows/quality-gate.yml
git commit -m "ci: add comprehensive quality gate workflow"
git push -u origin test/step5-quality-gate

# 2. åˆ›å»º PR è§‚å¯Ÿæ‰€æœ‰æ£€æŸ¥æ˜¯å¦è¿è¡Œ
# é¢„æœŸï¼š9ä¸ªæ£€æŸ¥å¹¶è¡Œè¿è¡Œ

# 3. æ£€æŸ¥å“ªäº›é€šè¿‡ï¼Œå“ªäº›å¤±è´¥
# 4. ä¿®å¤å¤±è´¥çš„æ£€æŸ¥

# 5. è¿è¡Œä¸€å‘¨ï¼Œè§‚å¯Ÿç¨³å®šæ€§
```

**å›æ»šæ–¹æ¡ˆ**:

```bash
# åˆ é™¤æˆ–ç¦ç”¨ quality-gate.yml
rm .github/workflows/quality-gate.yml
```

**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ + è§‚å¯ŸæœŸ1å‘¨

**é£é™©**: ğŸŸ¡ ä¸­ - æ–°å¢å¤šä¸ªæ£€æŸ¥ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´é…ç½®

---

### ğŸ”µ ç¬¬6æ­¥ï¼šå®‰å…¨æ‰«æå’Œæ€§èƒ½ç›‘æ§ï¼ˆå¢å€¼åŠŸèƒ½ï¼‰

**ç›®æ ‡**: æ·»åŠ å®‰å…¨å’Œæ€§èƒ½ç›‘æ§

**å®æ–½å†…å®¹**:

1. æ·»åŠ  security-scan.yml
2. æ·»åŠ  performance.yml
3. é…ç½® Snykï¼ˆå¯é€‰ï¼‰

**æµ‹è¯•éªŒè¯**:

```bash
# 1. é…ç½® Snykï¼ˆå¯é€‰ï¼‰
# è®¿é—® https://snyk.io æ³¨å†Œ
# æ·»åŠ  SNYK_TOKEN åˆ° GitHub Secrets

# 2. éƒ¨ç½²å·¥ä½œæµ
git checkout -b test/step6-security-performance
git add .github/workflows/security-scan.yml
git add .github/workflows/performance.yml
git commit -m "ci: add security scan and performance monitoring"
git push -u origin test/step6-security-performance

# 3. è§‚å¯Ÿæ‰«æç»“æœ
# 4. ä¿®å¤å‘ç°çš„å®‰å…¨é—®é¢˜
```

**å›æ»šæ–¹æ¡ˆ**:

```bash
# åˆ é™¤ç›¸å…³å·¥ä½œæµ
rm .github/workflows/security-scan.yml
rm .github/workflows/performance.yml
```

**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

**é£é™©**: ğŸŸ¢ ä½ - ç‹¬ç«‹å·¥ä½œæµï¼Œä¸å½±å“ä¸»æµç¨‹

---

### ğŸ”µ ç¬¬7æ­¥ï¼šè‡ªåŠ¨å‘å¸ƒï¼ˆæœ€åå¯ç”¨ï¼‰

**ç›®æ ‡**: å®ç°è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒ

**å®æ–½å†…å®¹**:

1. é…ç½® NPM_TOKEN
2. éƒ¨ç½² release.yml
3. æµ‹è¯•å‘å¸ƒæµç¨‹ï¼ˆå…ˆå‘å¸ƒåˆ°æµ‹è¯•åŒ…ï¼‰

**æµ‹è¯•éªŒè¯**:

```bash
# 1. åˆ›å»º npm æµ‹è¯•è´¦å·æˆ–ä½¿ç”¨ scope
# ä¿®æ”¹ package.json ä¸­çš„åŒ…åä¸º @your-scope/pitype-core-test

# 2. ç”Ÿæˆ npm token
# https://www.npmjs.com/settings/<username>/tokens
# æ·»åŠ åˆ° GitHub Secrets: NPM_TOKEN

# 3. åœ¨ dev åˆ†æ”¯æµ‹è¯•
git checkout -b test/step7-auto-release
git add .github/workflows/release.yml .releaserc.json
git commit -m "ci: add semantic release workflow"
git push -u origin test/step7-auto-release

# 4. åˆå¹¶åˆ° main è§¦å‘å‘å¸ƒï¼ˆç¡®ä¿ä¸€åˆ‡å°±ç»ªï¼ï¼‰

# 5. è§‚å¯Ÿæ˜¯å¦æˆåŠŸå‘å¸ƒ
```

**å›æ»šæ–¹æ¡ˆ**:

```bash
# ç¦ç”¨ release.yml
# æ‰‹åŠ¨å‘å¸ƒç‰ˆæœ¬ä¿®å¤
```

**é¢„è®¡æ—¶é—´**: 45åˆ†é’Ÿ

**é£é™©**: ğŸ”´ é«˜ - æ¶‰åŠè‡ªåŠ¨å‘å¸ƒï¼Œéœ€è°¨æ…æµ‹è¯•

---

## ğŸ¯ æ¨èå®æ–½é¡ºåº

### ç¬¬ä¸€é˜¶æ®µï¼ˆæœ¬å‘¨ï¼‰ï¼šåŸºç¡€è®¾æ–½

- [ ] **ç¬¬1æ­¥**: ä»£ç è§„èŒƒ (10åˆ†é’Ÿ)
- [ ] **ç¬¬2æ­¥**: Git Hooks (15åˆ†é’Ÿ)
- [ ] **ç¬¬3æ­¥**: å¢å¼ºCI (20åˆ†é’Ÿ)

### ç¬¬äºŒé˜¶æ®µï¼ˆä¸‹å‘¨ï¼‰ï¼šå¯è§‚æµ‹æ€§

- [ ] **ç¬¬4æ­¥**: Codecov (15åˆ†é’Ÿ)
- [ ] **ç¬¬5æ­¥**: å®Œæ•´è´¨é‡é—¨ç¦ (30åˆ†é’Ÿ + 1å‘¨è§‚å¯Ÿ)

### ç¬¬ä¸‰é˜¶æ®µï¼ˆ2å‘¨åï¼‰ï¼šé«˜çº§åŠŸèƒ½

- [ ] **ç¬¬6æ­¥**: å®‰å…¨å’Œæ€§èƒ½ (30åˆ†é’Ÿ)
- [ ] **ç¬¬7æ­¥**: è‡ªåŠ¨å‘å¸ƒ (45åˆ†é’Ÿ)

---

## ğŸ“Š è¿›åº¦è¿½è¸ªè¡¨

| æ­¥éª¤  | çŠ¶æ€      | å¼€å§‹æ—¶é—´ | å®Œæˆæ—¶é—´ | æµ‹è¯•ç»“æœ | å¤‡æ³¨           |
| ----- | --------- | -------- | -------- | -------- | -------------- |
| ç¬¬0æ­¥ | âœ… å®Œæˆ   | -        | -        | -        | é…ç½®æ–‡ä»¶å·²åˆ›å»º |
| ç¬¬1æ­¥ | â³ å¾…å¼€å§‹ | -        | -        | -        | -              |
| ç¬¬2æ­¥ | â³ å¾…å¼€å§‹ | -        | -        | -        | -              |
| ç¬¬3æ­¥ | â³ å¾…å¼€å§‹ | -        | -        | -        | -              |
| ç¬¬4æ­¥ | â³ å¾…å¼€å§‹ | -        | -        | -        | -              |
| ç¬¬5æ­¥ | â³ å¾…å¼€å§‹ | -        | -        | -        | -              |
| ç¬¬6æ­¥ | â³ å¾…å¼€å§‹ | -        | -        | -        | -              |
| ç¬¬7æ­¥ | â³ å¾…å¼€å§‹ | -        | -        | -        | -              |

---

## ğŸš¨ åº”æ€¥é¢„æ¡ˆ

### å¦‚æœæŸæ­¥å¤±è´¥ï¼š

1. **ä¸è¦æ…Œ** - æ‰€æœ‰æ”¹åŠ¨éƒ½åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­
2. **æŸ¥çœ‹é”™è¯¯** - åˆ†æå…·ä½“å¤±è´¥åŸå› 
3. **å°è¯•ä¿®å¤** - ç®€å•é—®é¢˜å¯ä»¥å¿«é€Ÿä¿®å¤
4. **æœæ–­å›æ»š** - å¤æ‚é—®é¢˜å…ˆå›æ»šå†ç ”ç©¶
5. **è®°å½•é—®é¢˜** - åœ¨æœ¬æ–‡æ¡£è®°å½•é‡åˆ°çš„é—®é¢˜

### å¸¸è§é—®é¢˜æ’æŸ¥ï¼š

- **Huskyä¸å·¥ä½œ**: `chmod +x .husky/*`
- **CIå¤±è´¥**: æ£€æŸ¥ GitHub Actions æ—¥å¿—
- **è¦†ç›–ç‡ä¸è¾¾æ ‡**: ä½¿ç”¨ `continue-on-error: true` ä¸´æ—¶æ”¾å®½
- **å‘å¸ƒå¤±è´¥**: æ£€æŸ¥ token æƒé™å’ŒåŒ…å

---

## ğŸ“ å®æ–½æ—¥å¿—

### ç¬¬1æ­¥å®æ–½æ—¥å¿—

```
æ—¥æœŸ: ____
æ‰§è¡Œäºº: ____
æµ‹è¯•ç»“æœ:
é—®é¢˜:
è§£å†³æ–¹æ¡ˆ:
```

### ç¬¬2æ­¥å®æ–½æ—¥å¿—

```
æ—¥æœŸ: ____
æ‰§è¡Œäºº: ____
æµ‹è¯•ç»“æœ:
é—®é¢˜:
è§£å†³æ–¹æ¡ˆ:
```

ï¼ˆä»¥æ­¤ç±»æ¨...ï¼‰

---

## âœ… å®Œæˆæ ‡å‡†

æ¯ä¸€æ­¥å®Œæˆéœ€æ»¡è¶³ï¼š

- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] CIæµ‹è¯•é€šè¿‡ï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] å›¢é˜Ÿæˆå‘˜éªŒè¯
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] å›æ»šæ–¹æ¡ˆå·²éªŒè¯

å…¨éƒ¨å®Œæˆæ ‡å‡†ï¼š

- [ ] æ‰€æœ‰7æ­¥éƒ½å·²å®Œæˆ
- [ ] è´¨é‡æŒ‡æ ‡è¾¾æ ‡
- [ ] å›¢é˜Ÿç†Ÿæ‚‰æ–°æµç¨‹
- [ ] æ— æ˜æ˜¾æ€§èƒ½å½±å“
- [ ] åº”æ€¥é¢„æ¡ˆå·²æ¼”ç»ƒ

---

**åˆ›å»ºæ—¥æœŸ**: 2025-11-16
**ç»´æŠ¤è€…**: @stoa
